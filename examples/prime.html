<!-- 
This file shows the most easy use-case for the Cacatoo library. 
It simply load the library and other dependencies using <script>
tags, load some CSS-stylesheets for the GUI, and than starts 
with defining the sim. 
-->

<!--  ---------------Do not change the part below ------------------  -->

<html>
<script src="../dist/cacatoo.js"></script>                 <!-- Include cacatoo library (compiled with rollup) -->
<script src="../lib/all.js"></script>                      <!-- Include other libraries (concattenated in 1 file) -->
<link rel="stylesheet" href="../style/cacatoo.css">        <!-- Set style sheet -->

<script>
/*-----------------------Start user-defined code ---------------------*/

let simulation;

function setup()
{

    let config = {  
            title: "Modulo prime",
            description: "Update rule: next_state = n_neighbours % 2",
            maxtime: 100000000,
            ncol : 300,
            nrow : 300,		                          // dimensions of the grid to build
            sleep: 200,
            fastmode: true,                           // Ironically, to slow down the FPS, you have to be in fast mode :D            
            wrap : [true, true],                      // Wrap boundary [COLS, ROWS]
            scale : 2,				                  // scale of the grid (nxn pixels per grid cell)
            statecolours: {'alive':{1:'white'}},    // Only defining the "alive" state, while...
    }

    sim = new Simulation(config)             // Initialise a new sim instance with configuration given above
    
    sim.makeGridModel("prime");         
    sim.createDisplay("prime","alive")
    
    // Note to user: initialPattern is disabled, as it requirs a webserver for security reasons. Use the pattern button instead. 
    // sim.initialPattern(sim.prime, 'alive', '../patterns/elephant_cacatoo.png', 115, 115)
    
    sim.prime.nextState = function(i,j)                         // Define the next-state function. This example is modulo prime
    {
        this.grid[i][j].alive = (this.countMoore8(this,i,j,1,'alive')%2==0 ? 0 : 1)
    }


    sim.prime.update = function()
    {        
        this.synchronous()        
    }  

    // Adds a pattern load button
    sim.addPatternButton(sim.prime,'alive')    
    sim.addButton("pause/continue",function() { sim.toggle_play()})    
    sim.addButton("step",function() { sim.step(); sim.display()})
    sim.pause = true
    sim.start()
}

</script>



<body onload="setup()">        
    <div class="header" id="header"><h2>Cacatoo</h2></div>

    <div class="content" id="canvas_holder"></div>
    <div class="content" id="form_holder"></div>    
    <div class="content" id="graph_holder"> </div>
    <div class="footer" id="footer"></div>
</body>

</html>