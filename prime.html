<html>
<script src="dist/cacatoo.js"></script>                 <!-- Include cacatoo library (compiled with rollup) -->
<script src="lib/all.js"></script>                      <!-- Include other libraries (concattenated in 1 file) -->
<link rel="stylesheet" href="style/cacatoo.css">        <!-- Set style sheet -->

<script>
/*-----------------------Start user-defined code ---------------------*/

let model;

function setup()
{

    let config = {  
            title: "Modulo prime",
            description: "Update rule: next_state = n_neighbours % 2",
            maxtime: 100000000,
            ncol : 300,
            nrow : 300,		                          // dimensions of the grid to build
            sleep: 200,
            fastmode: true,                           // Ironically, to slow down the FPS, you have to be in fast mode :D            
            wrap : [true, true],                      // Wrap boundary [COLS, ROWS]
            scale : 2,				                  // scale of the grid (nxn pixels per CA cell)
            statecolours: {'alive':1}                 // States as shown on coloured pixels on canvas, can be either a single value or a dictionary of key,value pairs
    }

    model = new Model(config)             // Initialise a new Model instance with configuration given above
    
    model.makeGrid("prime");         
    
    // Note to user: initialPattern may have issues with your browser security. If so, either select your own pattern using the pattern button (which is added in this example below), or start a local webserver (most browsers have free plugins for this)    
    model.initialPattern(model.prime, 'alive', './patterns/elephant_cacatoo.png', 115, 115)
    
    model.prime.nextState = function(i,j)                         // Define the next-state function. This example is game of life
    {
        this.grid[i][j].alive = (this.countMoore8(this,i,j,1,'alive')%2==0 ? 0 : 1)
    }


    model.prime.update = function()
    {        
        this.synchronous()        
    }  

    // Adds a pattern load button
    model.addPatternButton(model.prime,'alive')    
                               
    model.start()  
}

</script>



<body onload="setup()">        
    <div class="header" id="header"><h2>ModelJS - </h2></div>

    <div class="content" id="canvas_holder"></div>
    <div class="content" id="form_holder"></div>    
    <div class="content" id="graph_holder"> </div>
    <div class="footer" id="footer"></div>
</body>

</html>